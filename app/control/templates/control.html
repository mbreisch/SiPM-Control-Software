{% extends "layout.html" %}

{% block title %}Control{% endblock %}

{% block content %}
    <head>
        <title>My Django Site</title>
        <style>
            /* Set the background color for the entire page */
            body {
                background-color: black;
                color: white; /* Ensure text is visible against the black background */
            }
        </style>
    </head>

    <style>
        .imgContainer{position: relative;}
        {% for row in range(8) %}
        .label{{ row }} {
            position: absolute;
            left: {{ row * 100 + 200 }}px;
            top: {{ 5 }}px;
        }
        {% endfor %}
    </style>

<button id="init_temperature" class="btn btn-dark btn-block" type="button" onclick="init_temp_func();">Init Temperature Sensors</button>
<button id="get_temperature" class="btn btn-dark btn-block" type="button" onclick="startTempInterval();">Get Temperature Values</button>
<div class="imgContainer">
    <img src="{{ url_for('control.static', filename='black.jpg') }}" width="90%" height="50" />
    {% for row in range(8) %}
    <label class="label{{ row }}" id="label{{ row }}" style="color: black">{{ row }}</label>
    {% endfor %}
</div>

<!-- Refreshing PNG every second -->
<div id="TemperatureImageContainer">
    <img id="TemperatureRefresh" src="{{ url_for('control.static', filename='MonitoringTemperature.png') }}" width="1000px" height="600px" />
</div>

<style></style>

<button id="init_dac" class="btn btn-dark btn-block" type="button" onclick="init_dac_func();">Init DAC</button>
<button id="get_adc_volts" class="btn btn-dark btn-block" type="button" onclick="startAdcInterval();">Get ADC Values</button>
<table align="center" border="1" cellspacing="10" cellpadding="10">
    <tr>
        {% for chan in range(0, 4) %}
        <th>
            <form>
                <p>Channel {{ chan + 1 }} | VME {{ chan }}</p>
                <label for="slider{{ chan }}">Set Voltage [V]:</label>
                <input type="number" id="involt{{ chan }}" name="slider{{ chan }}" min="0" max="35" value="0">
                <input type="button" value="Set" onclick="set_dac_value('involt{{ chan }}', {{ chan }}, 'sliderVal{{ chan }}');">
                <br>
                <label for="getvolt">Current Voltage [V]:</label>
                <output type="number" id="ADCVal{{ chan }}" name="getvolt"></output>
            </form>
        </th>
        {% endfor %}
    </tr>
    <tr></tr>
    <tr></tr>
    <tr>
        {% for chan in range(4, 8) %}
        <th>
            <form>
                <p>Channel {{ chan + 1 }} | VME {{ chan }}</p>
                <label for="slider{{ chan }}">Set Voltage [V]:</label>
                <input type="number" id="involt{{ chan }}" name="slider{{ chan }}" min="0" max="35" value="0">
                <input type="button" value="Set" onclick="set_dac_value('involt{{ chan }}', {{ chan }}, 'sliderVal{{ chan }}');">
                <br>
                <label for="getvolt">Current Voltage [V]:</label>
                <output type="number" id="ADCVal{{ chan }}" name="getvolt"></output>
            </form>
        </th>
        {% endfor %}
    </tr>
</table>
<th>
    <form>
        <p>Value for all Channels [V]</p>
        <label for="slider">Set Voltage [V]:</label>
        <input type="number" id="involt_all" name="slider" min="0" max="35" value="0">
        <input type="button" value="Set" onclick="set_all_value('slider');">
    </form>
</th>

<!-- Refreshing PNG every second -->
<div id="VoltageImageContainer2">
    <img id="VoltageImage" src="{{ url_for('control.static', filename='MonitoringVoltage.png') }}" width="1000px" height="600px" />
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}