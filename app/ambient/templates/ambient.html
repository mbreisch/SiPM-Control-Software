{% extends "layout.html" %}

{% block title %}Ambient HTML{% endblock %}

{% block content %}
<head>
    <title>Ambient Overview</title>
    <link rel="stylesheet" href="{{ url_for('ambient.static', filename='css/styles.css') }}">
    <script src="{{ url_for('ambient.static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('ambient.static', filename='js/script.js') }}"></script>
</head>

<body>
    <script>
        setTimeout(() => {
            setInterval(update_cooler, 5000);  // Update Cooler every 6.666 seconds
        }, 0);

        setTimeout(() => {
            setInterval(update_darkbox, 5000);  // Start updating Darkbox after a delay of 2 seconds
        }, 2000);

        setTimeout(() => {
            setInterval(update_outside, 5000);  // Start updating Outside after a delay of 4 seconds
        }, 4000);
    </script>

    <div id="IDambient" class="Ambient">
        <div id="IDimageCooler">
            <img id="Cooler" src="{{ url_for('ambient.static', filename='Ambient_cooler.png') }}" alt="Ambient_cooler" width="600px" height="400px" />
        </div>
        <script>
            function refreshCooler() {
                const img = "{{ url_for('ambient.static', filename='Ambient_cooler.png') }}";
                reloadImg(img)
                    .then(() => {
                        console.log("Refreshing Cooler Image at: " + new Date().toLocaleTimeString());
                    })
                    .catch(error => {
                        console.error("Failed to load Cooler Image. Retrying...");
                    });
            }
            setTimeout(() => {
                setInterval(refreshCooler, 5000);  // Starts after 5 seconds
            }, 1000);
        </script>

        <div id="IDimageOutside">
            <img id="Outside" src="{{ url_for('ambient.static', filename='Ambient_outside.png') }}" alt="Ambient_outside" width="600px" height="400px" />
        </div>
        <script>
            function refreshOutside() {
                const img = "{{ url_for('ambient.static', filename='Ambient_outside.png') }}";
                reloadImg(img)
                    .then(() => {
                        console.log("Refreshing Outside Image at: " + new Date().toLocaleTimeString());
                    })
                    .catch(error => {
                        console.error("Failed to load Outside Image. Retrying...");
                    });
            }
            setTimeout(() => {
                setInterval(refreshOutside, 5000);  // Starts after 5 seconds
            }, 3000);
        </script>

        <div id="IDimageDarkbox">
            <img id="Darkbox" src="{{ url_for('ambient.static', filename='Ambient_darkbox.png') }}" alt="Ambient_darkbox" width="600px" height="400px" />
        </div>
        <script>
            function refreshDarkbox() {
                const img = "{{ url_for('ambient.static', filename='Ambient_darkbox.png') }}";
                reloadImg(img)
                    .then(() => {
                        console.log("Refreshing Darkbox Image at: " + new Date().toLocaleTimeString());
                    })
                    .catch(error => {
                        console.error("Failed to load Darkbox Image. Retrying...");
                    });
            }
            setTimeout(() => {
                setInterval(refreshDarkbox, 5000);  // Starts after 10 seconds
            }, 5000);
        </script>
    </div>

    <br>
    <br>

    <div class="setWindowOV">
        <div id="SetCoolerPlot">
            <input type="number" id="camount" placeholder="Enter plot amount">
            <button onclick="set_plot_settings('cooler','camount',0)">Set</button>
        </div>

        <div id="SetOutsidePlot">
            <input type="number" id="oamount" placeholder="Enter plot amount">
            <button onclick="set_plot_settings('outside','oamount',0)">Set</button>
        </div>

        <div id="SetDarkboxPlot">
            <input type="number" id="damount" placeholder="Enter plot amount">
            <button onclick="set_plot_settings('darkbox','damount',0)">Set</button>
        </div>
    </div>

    <br>
    <br>

    <div class="setLimitOV">
        <div class="setCoolerLimit">
            <div id="setCoolerLimit_ax1_min">
                <input type="number" id="ylimit_cax1_min" placeholder="Enter C y_min Temperature">
                <button onclick="set_plot_settings('cooler', 'ylimit_cax1_min', 0)">Set</button>
                <div class="led" id="led-ylimit_cax1_min"></div>
                <button onclick="set_plot_settings('cooler', 'ylimit_cax1_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_cax1_min-auto"></div>
            </div>
            <div id="setCoolerLimit_ax1_max">
                <input type="number" id="ylimit_cax1_max" placeholder="Enter C y_max Temperature">
                <button onclick="set_plot_settings('cooler', 'ylimit_cax1_max', 0)">Set</button>
                <div class="led" id="led-ylimit_cax1_max"></div>
                <button onclick="set_plot_settings('cooler', 'ylimit_cax1_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_cax1_max-auto"></div>
            </div>
            <div id="setCoolerLimit_ax2_min">
                <input type="number" id="ylimit_cax2_min" placeholder="Enter C y_min Humidity">
                <button onclick="set_plot_settings('cooler', 'ylimit_cax2_min', 0)">Set</button>
                <div class="led" id="led-ylimit_cax2_min"></div>
                <button onclick="set_plot_settings('cooler', 'ylimit_cax2_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_cax2_min-auto"></div>
            </div>
            <div id="setCoolerLimit_ax2_max">
                <input type="number" id="ylimit_cax2_max" placeholder="Enter C y_max Humidity">
                <button onclick="set_plot_settings('cooler', 'ylimit_cax2_max', 0)">Set</button>
                <div class="led" id="led-ylimit_cax2_max"></div>
                <button onclick="set_plot_settings('cooler', 'ylimit_cax2_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_cax2_max-auto"></div>
            </div>
        </div>

        <div class="setOutsideLimit">
            <div id="setOutsideLimit_ax1_min">
                <input type="number" id="ylimit_oax1_min" placeholder="Enter O y_min Temperature">
                <button onclick="set_plot_settings('outside', 'ylimit_oax1_min', 0)">Set</button>
                <div class="led" id="led-ylimit_oax1_min"></div>
                <button onclick="set_plot_settings('outside', 'ylimit_oax1_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_oax1_min-auto"></div>
            </div>
            <div id="setOutsideLimit_ax1_max">
                <input type="number" id="ylimit_oax1_max" placeholder="Enter O y_max Temperature">
                <button onclick="set_plot_settings('outside', 'ylimit_oax1_max', 0)">Set</button>
                <div class="led" id="led-ylimit_oax1_max"></div>
                <button onclick="set_plot_settings('outside', 'ylimit_oax1_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_oax1_max-auto"></div>
            </div>
            <div id="setOutsideLimit_ax2_min">
                <input type="number" id="ylimit_oax2_min" placeholder="Enter O y_min Humidity">
                <button onclick="set_plot_settings('outside', 'ylimit_oax2_min', 0)">Set</button>
                <div class="led" id="led-ylimit_oax2_min"></div>
                <button onclick="set_plot_settings('outside', 'ylimit_oax2_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_oax2_min-auto"></div>
            </div>
            <div id="setOutsideLimit_ax2_max">
                <input type="number" id="ylimit_oax2_max" placeholder="Enter O y_max Humidity">
                <button onclick="set_plot_settings('outside', 'ylimit_oax2_max', 0)">Set</button>
                <div class="led" id="led-ylimit_oax2_max"></div>
                <button onclick="set_plot_settings('outside', 'ylimit_oax2_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_oax2_max-auto"></div>
            </div>
        </div>

        <div class="setDarkboxLimit">
            <div id="setDarkboxLimit_ax1_min">
                <input type="number" id="ylimit_dax1_min" placeholder="Enter D y_min Temperature">
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax1_min', 0)">Set</button>
                <div class="led" id="led-ylimit_dax1_min"></div>
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax1_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_dax1_min-auto"></div>
            </div>
            <div id="setDarkboxLimit_ax1_max">
                <input type="number" id="ylimit_dax1_max" placeholder="Enter D y_max Temperature">
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax1_max', 0)">Set</button>
                <div class="led" id="led-ylimit_dax1_max"></div>
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax1_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_dax1_max-auto"></div>
            </div>
            <div id="setDarkboxLimit_ax2_min">
                <input type="number" id="ylimit_dax2_min" placeholder="Enter D y_min Humidity">
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax2_min', 0)">Set</button>
                <div class="led" id="led-ylimit_dax2_min"></div>
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax2_min', -1)">Auto</button>
                <div class="led" id="led-ylimit_dax2_min-auto"></div>
            </div>
            <div id="setDarkboxLimit_ax2_max">
                <input type="number" id="ylimit_dax2_max" placeholder="Enter D y_max Humidity">
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax2_max', 0)">Set</button>
                <div class="led" id="led-ylimit_dax2_max"></div>
                <button onclick="set_plot_settings('darkbox', 'ylimit_dax2_max', -1)">Auto</button>
                <div class="led" id="led-ylimit_dax2_max-auto"></div>
            </div>
        </div>
    </div>
</body>
{% endblock %}
