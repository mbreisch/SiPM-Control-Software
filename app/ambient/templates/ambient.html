{% extends "layout.html" %}

{% block title %}Ambient HTML{% endblock %}

{% block content %}
    <head>
        <title>Ambient Overview</title>
        <link rel="stylesheet" href="{{ url_for('ambient.static', filename='css/styles.css') }}">
        <script src="{{ url_for('ambient.static', filename='js/jquery.min.js') }}"></script>
        <script src="{{ url_for('ambient.static', filename='js/script.js') }}"></script>
    </head>

    <body>
        <script>
            setTimeout(() => {
                setInterval(update_cooler, 5000);  // Update Cooler every 6.666 seconds
            }, 0);

            setTimeout(() => {
                setInterval(update_darkbox, 5000);  // Start updating Darkbox after a delay of 2 seconds
            }, 2000);

            setTimeout(() => {
                setInterval(update_outside, 5000);  // Start updating Outside after a delay of 4 seconds
            }, 4000);
        </script>

        <div id="IDambient" class="Ambient">
            <div id="IDimageCooler">
            <img id="Cooler" src="{{ url_for('ambient.static', filename='Ambient_cooler.png') }}" alt="Ambient_cooler" width="600px" height="400px" />
            </div>
            <script>
            function refreshCooler() {
                const img = "{{ url_for('ambient.static', filename='Ambient_cooler.png') }}";
                reloadImg(img)
                .then(() => {
                console.log("Refreshing Cooler Image at: " + new Date().toLocaleTimeString());
                })
                .catch(error => {
                console.error("Failed to load Cooler Image. Retrying...");
                }); 
            }
            setTimeout(() => {
                setInterval(refreshCooler, 5000);  // Starts after 5 seconds
            }, 1000);
            </script>

            <div id="IDimageOutside">
            <img id="Outside" src="{{ url_for('ambient.static', filename='Ambient_outside.png') }}" alt="Ambient_outside" width="600px" height="400px" />
            </div>
            <script>
            function refreshOutside() {
                const img = "{{ url_for('ambient.static', filename='Ambient_outside.png') }}";
                reloadImg(img)
                .then(() => {
                console.log("Refreshing Outside Image at: " + new Date().toLocaleTimeString());
                })
                .catch(error => {
                console.error("Failed to load Outside Image. Retrying...");
                }); 
            }
            setTimeout(() => {
                setInterval(refreshOutside, 5000);  // Starts after 5 seconds
            }, 3000);
            </script>

            <div id="IDimageDarkbox">
            <img id="Darkbox" src="{{ url_for('ambient.static', filename='Ambient_darkbox.png') }}" alt="Ambient_darkbox" width="600px" height="400px" />
            </div>
            <script>
            function refreshDarkbox() {
                const img = "{{ url_for('ambient.static', filename='Ambient_darkbox.png') }}";
                reloadImg(img)
                .then(() => {
                console.log("Refreshing Darkbox Image at: " + new Date().toLocaleTimeString());
                })
                .catch(error => {
                console.error("Failed to load Darkbox Image. Retrying...");
                }); 
            }
            setTimeout(() => {
                setInterval(refreshDarkbox, 5000);  // Starts after 10 seconds
            }, 5000);
            </script>
        </div>

        <br>
        <br>

        <div id="setWindowOV">
            <div id="SetCoolerPlot">
                <input type="number" id="setAmount1" placeholder="Enter plot amount">
                <button onclick="set_plot_settings('cooler','amount')">Set</button>
            </div>

            <div id="SetOutsidePlot">
                <input type="number" id="setAmount2" placeholder="Enter plot amount">
                <button onclick="set_plot_settings('outside','amount')">Set</button>
            </div>

            <div id="SetDarkboxPlot">
                <input type="number" id="setAmount3" placeholder="Enter plot amount">
                <button onclick="set_plot_settings('darkbox','amount')">Set</button>
            </div>
        </div>

        <br>
        <br>

        <div id="setLimitOV">
            <div id="setCoolerLimit">
                <div id="setCoolerLimit_ax1_min">
                    <input type="number" id="setCoolerAx1min" placeholder="Enter y_min Temperature">
                    <button onclick="set_plot_settings('cooler','ylimit_ax1_min')">Set</button>
                </div>
                <div id="setCoolerLimit_ax1_max">
                    <input type="number" id="setCoolerAx1max" placeholder="Enter y_max Temperature">
                    <button onclick="set_plot_settings('cooler','ylimit_ax1_max')">Set</button>
                </div>
                <div id="setCoolerLimit_ax2_min">
                    <input type="number" id="setCoolerAx2min" placeholder="Enter y_min Humidity">
                    <button onclick="set_plot_settings('cooler','ylimit_ax2_min')">Set</button>
                </div>
                <div id="setCoolerLimit_ax2_max">
                    <input type="number" id="setCoolerAx2max" placeholder="Enter y_max Humidity">
                    <button onclick="set_plot_settings('cooler','ylimit_ax2_max')">Set</button>
                </div>
            </div>
            <div id="setOutsideLimit">
                <div id="setOutsideLimit_ax1_min">
                    <input type="number" id="setOutsideAx1min" placeholder="Enter y_min Temperature">
                    <button onclick="set_plot_settings('outside','ylimit_ax1_min')">Set</button>
                </div>
                <div id="setOutsideLimit_ax1_max">
                    <input type="number" id="setOutsideAx1max" placeholder="Enter y_max Temperature">
                    <button onclick="set_plot_settings('outside','ylimit_ax1_max')">Set</button>
                </div>
                <div id="setOutsideLimit_ax2_min">
                    <input type="number" id="setOutsideAx2min" placeholder="Enter y_min Humidity">
                    <button onclick="set_plot_settings('outside','ylimit_ax2_min')">Set</button>
                </div>
                <div id="setOutsideLimit_ax2_max">
                    <input type="number" id="setOutsideAx2max" placeholder="Enter y_max Humidity">
                    <button onclick="set_plot_settings('outside','ylimit_ax2_min')">Set</button>
                </div>
            </div>

            <div id="setDarkboxLimit">
                <div id="setDarkboxLimit_ax1_min">
                    <input type="number" id="setDarkboxAx1min" placeholder="Enter y_min Temperature">
                    <button onclick="set_plot_settings('darkbox','ylimit_ax1_min')">Set</button>
                </div>
                <div id="setDarkboxLimit_ax1_max">
                    <input type="number" id="setDarkboxAx1max" placeholder="Enter y_max Temperature">
                    <button onclick="set_plot_settings('darkbox','ylimit_ax1_max')">Set</button>
                </div>
                <div id="setDarkboxLimit_ax2_min">
                    <input type="number" id="setDarkboxAx2min" placeholder="Enter y_min Humidity">
                    <button onclick="set_plot_settings('darkbox','ylimit_ax2_min')">Set</button>
                </div>
                <div id="setDarkboxLimit_ax2_max">
                    <input type="number" id="setDarkboxAx2max" placeholder="Enter y_max Humidity">
                    <button onclick="set_plot_settings('darkbox','ylimit_ax2_max')">Set</button>
                </div>
            </div>
        </div>   
    </body>
{% endblock %}